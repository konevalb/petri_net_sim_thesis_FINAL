<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTA-Petri Net Integration for Cyber-Physical Supply Chain Risk with Mitigation Solutions</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Integrated FTA-Petri Net Model for Cyber-Physical Supply Chain Risk Assessment</h1>
            <div class="subtitle">Traditional vs. Cyber-Physical Integration vs. Mitigation-Enhanced Model</div>
        </div>
        
        <div class="tab-navigation">
            <button class="tab-btn active" onclick="showTab('home', event)">Overview</button>
            <button class="tab-btn" onclick="showTab('simulation', event)">Petri Net Simulation</button>
            <button class="tab-btn" onclick="showTab('montecarlo', event)">Monte Carlo Analysis</button>
            <button class="tab-btn" onclick="showTab('fta', event)">Enhanced FTA</button>
            <button class="tab-btn" onclick="showTab('scor', event)">SCOR Mapping</button>
        </div>
        
        <!-- Overview/Home Tab -->
        <div id="home-tab" class="tab-content active">
            <div id="homeContainer"></div>
        </div>
        
        <!-- Simulation Tab -->
        <div id="simulation-tab" class="tab-content">
        <div class="main-content">
            <!--MITIGATION STRATEGIES PANEL.Moves.-->
            <div class="mitigation-panel">
                <div class="mitigation-header">
                    Risk Mitigation Strategies
                </div>
                <div class="mitigation-list">
                    <div class="mitigation-item" id="mit-backup">
                        <input type="checkbox" class="mitigation-checkbox" onchange="toggleMitigation('backup')">
                        <div class="mitigation-info">
                            <div class="mitigation-name">Automated Backup System</div>
                            <div class="mitigation-desc">15-min recovery from ransomware</div>
                        </div>
                        <div class="mitigation-cost">$5K/mo</div>
                    </div>
                    <div class="mitigation-item" id="mit-firewall">
                        <input type="checkbox" class="mitigation-checkbox" onchange="toggleMitigation('firewall')">
                        <div class="mitigation-info">
                            <div class="mitigation-name">Advanced Firewall & IDS</div>
                            <div class="mitigation-desc">AI-powered threat detection</div>
                        </div>
                        <div class="mitigation-cost">$3K/mo</div>
                    </div>
                    <div class="mitigation-item" id="mit-buffer">
                        <input type="checkbox" class="mitigation-checkbox" onchange="toggleMitigation('buffer')">
                        <div class="mitigation-info">
                            <div class="mitigation-name">30-Day Buffer Inventory</div>
                            <div class="mitigation-desc">Strategic reserves for disruptions</div>
                        </div>
                        <div class="mitigation-cost">$15K</div>
                    </div>
                    <div class="mitigation-item" id="mit-dual">
                        <input type="checkbox" class="mitigation-checkbox" onchange="toggleMitigation('dual')">
                        <div class="mitigation-info">
                            <div class="mitigation-name">Dual Sourcing Strategy</div>
                            <div class="mitigation-desc">Backup suppliers with 48hr activation</div>
                        </div>
                        <div class="mitigation-cost">$4K/mo</div>
                    </div>
                    <div class="mitigation-item" id="mit-maintenance">
                        <input type="checkbox" class="mitigation-checkbox" onchange="toggleMitigation('maintenance')">
                        <div class="mitigation-info">
                            <div class="mitigation-name">Predictive Maintenance</div>
                            <div class="mitigation-desc">IoT/ML equipment monitoring</div>
                        </div>
                        <div class="mitigation-cost">$6K/mo</div>
                    </div>
                    <div class="mitigation-item" id="mit-redundancy">
                        <input type="checkbox" class="mitigation-checkbox" onchange="toggleMitigation('redundancy')">
                        <div class="mitigation-info">
                            <div class="mitigation-name">Equipment Redundancy</div>
                            <div class="mitigation-desc">Hot-swappable backup systems</div>
                        </div>
                        <div class="mitigation-cost">$25K</div>
                    </div>
                </div>
            </div>
            <div class="simulation-info">
                This model compares traditional physical-only supply chain risk assessment with an integrated cyber-physical approach using Fault Tree Analysis (FTA) and Petri Nets. Watch how tokens (black dots) move through the network representing system states and disruption cascades.
            </div>
            
            <div style="background: #f8f9fa; padding: 16px; margin-bottom: 20px; border-radius: 4px; border: 1px solid #dee2e6;">
                <div style="font-size: 14px; color: #212529; font-weight: 600; margin-bottom: 12px;">
                    Quick Start Guide
                </div>
                <div style="font-size: 13px; color: #495057; line-height: 1.8;">
                    <strong>Step 1:</strong> Click <span style="background: #e9ecef; padding: 2px 6px; border-radius: 3px; font-weight: 500;">Reset All</span> to ensure both models start fresh<br>
                    <strong>Step 2:</strong> Click <span style="background: #e9ecef; padding: 2px 6px; border-radius: 3px; font-weight: 500;">Trigger Ransomware</span> to simulate a cyber attack<br>
                    <strong>Step 3:</strong> Watch the <strong>left model</strong> (traditional) - only the manufacturer gets disrupted<br>
                    <strong>Step 4:</strong> Watch the <strong>right model</strong> (integrated) - see how the disruption cascades to distributor and customer<br>
                    <strong>Step 5:</strong> Click <span style="background: #e9ecef; padding: 2px 6px; border-radius: 3px; font-weight: 500;">Compare Models</span> to see the cost difference<br>
                    
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #dee2e6;">
                        <strong style="color: #212529;">What you'll observe:</strong>
                        <div style="margin-top: 6px;">
                            • <strong>Black dots (tokens)</strong> move between circles showing state changes<br>
                            • <strong>Red dashed arrows</strong> in the right model show cyber-physical cascades<br>
                            • <strong>Cost difference</strong> reveals hidden risks (often 40-60% higher) that traditional models miss<br>
                            • <strong>Key finding:</strong> Traditional risk assessment significantly underestimates true cyber-physical impacts
                        </div>
                    </div>
                    
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #dee2e6;">
                        <strong style="color: #212529;">FTA Analysis Box (right model only):</strong>
                        <div style="margin-top: 6px;">
                            The <strong>Fault Tree Analysis (FTA)</strong> box shows the probability of system failure based on the current state. FTA is a top-down risk assessment method that calculates failure probability from component failures and their relationships.
                        </div>
                    </div>
                    
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #dee2e6;">
                        <strong style="color: #212529;">For deeper analysis:</strong> Try the <span style="background: #e9ecef; padding: 2px 6px; border-radius: 3px; font-weight: 500;">Run 30-Day Simulation</span> to see probabilistic events over time, or use <span style="background: #e9ecef; padding: 2px 6px; border-radius: 3px; font-weight: 500;">Step Forward</span> to advance day-by-day.
                    </div>
                </div>
            </div>
            
            <div class="parameters-section">
                <div class="parameters-header">Adjustable Risk Parameters</div>
                <div style="background: #f8f9fa; padding: 14px; margin-bottom: 20px; border-radius: 4px; border: 1px solid #dee2e6;">
                    <div style="font-size: 13px; color: #495057; line-height: 1.6;">
                        <strong style="color: #212529;">Configure your risk model:</strong> Adjust these parameters to simulate different risk scenarios and see how they impact costs.
                        <div style="margin-top: 8px;">
                            • <strong>Probabilities (%):</strong> Daily chance of each disruption occurring (e.g., 2% = happens roughly once every 50 days)<br>
                            • <strong>Cascade Delay:</strong> How quickly disruptions spread from one node to another in the network<br>
                            • <strong>Recovery Factor:</strong> Multiplier for how long it takes systems to return to normal operations<br>
                            • <strong>Cost Multiplier:</strong> Scale all financial impacts up or down to match your industry/company size
                        </div>
                    </div>
                </div>
                <div class="parameter-grid">
                    <div class="parameter-control">
                        <label class="parameter-label">Ransomware Probability (%)</label>
                        <div class="parameter-input">
                            <input type="range" id="ransomwareProb" min="0" max="10" step="0.5" value="2" onchange="updateParameter('ransomwareProb', this.value)">
                            <span class="parameter-value" id="ransomwareProbValue">2%</span>
                        </div>
                    </div>
                    <div class="parameter-control">
                        <label class="parameter-label">Equipment Failure Probability (%)</label>
                        <div class="parameter-input">
                            <input type="range" id="equipmentProb" min="0" max="15" step="0.5" value="5" onchange="updateParameter('equipmentProb', this.value)">
                            <span class="parameter-value" id="equipmentProbValue">5%</span>
                        </div>
                    </div>
                    <div class="parameter-control">
                        <label class="parameter-label">Supplier Disruption Probability (%)</label>
                        <div class="parameter-input">
                            <input type="range" id="supplierProb" min="0" max="5" step="0.1" value="1" onchange="updateParameter('supplierProb', this.value)">
                            <span class="parameter-value" id="supplierProbValue">1%</span>
                        </div>
                    </div>
                    <div class="parameter-control">
                        <label class="parameter-label">Cascade Delay (ms)</label>
                        <div class="parameter-input">
                            <input type="range" id="cascadeDelay" min="200" max="2000" step="100" value="800" onchange="updateParameter('cascadeDelay', this.value)">
                            <span class="parameter-value" id="cascadeDelayValue">800ms</span>
                        </div>
                    </div>
                    <div class="parameter-control">
                        <label class="parameter-label">Recovery Factor</label>
                        <div class="parameter-input">
                            <input type="range" id="recoveryFactor" min="1" max="5" step="0.5" value="3" onchange="updateParameter('recoveryFactor', this.value)">
                            <span class="parameter-value" id="recoveryFactorValue">3x</span>
                        </div>
                    </div>
                    <div class="parameter-control">
                        <label class="parameter-label">Cost Multiplier</label>
                        <div class="parameter-input">
                            <input type="range" id="costMultiplier" min="0.5" max="3" step="0.1" value="1" onchange="updateParameter('costMultiplier', this.value)">
                            <span class="parameter-value" id="costMultiplierValue">1.0x</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="notation-section">
                <div class="notation-tables">
                    <div class="notation-table">
                        <h3>Place Legend (P)</h3>
                        <table>
                            <tr><td>P₁-P₃</td><td>Manufacturer Normal/Disrupted/Recovery</td></tr>
                            <tr><td>P₄-P₆</td><td>Distributor Normal/Disrupted/Recovery</td></tr>
                            <tr><td>P₇-P₉</td><td>Customer Normal/Impacted/Recovery</td></tr>
                            <tr><td>P₁₀-P₁₂</td><td>IT/Production/Logistics Systems (Cyber)</td></tr>
                        </table>
                    </div>
                    <div class="notation-table">
                        <h3>Transition Legend (T)</h3>
                        <table>
                            <tr><td>T₁-T₃</td><td>FTA-triggered disruptions (Ransomware/Equipment/Supplier)</td></tr>
                            <tr><td>T₄-T₅</td><td>Cascade propagation (Cyber → Physical)</td></tr>
                            <tr><td>T₆-T₁₁</td><td>Recovery transitions</td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div style="width:30px; height:20px; background:#d4edda; border:2px solid #28a745; border-radius:50%;"></div>
                    <span>Normal State</span>
                </div>
                <div class="legend-item">
                    <div style="width:30px; height:20px; background:#f8d7da; border:2px solid #dc3545; border-radius:50%;"></div>
                    <span>Disrupted State</span>
                </div>
                <div class="legend-item">
                    <div style="width:30px; height:20px; background:#fff3cd; border:2px solid #ffc107; border-radius:50%;"></div>
                    <span>Recovery State</span>
                </div>
                <div class="legend-item">
                    <div style="width:30px; height:20px; background:#e7e3ff; border:2px solid #6f42c1; border-radius:50%;"></div>
                    <span>Cyber System</span>
                </div>
                <div class="legend-item">
                    <div style="width:30px; height:4px; background:#dc3545; margin-top:8px;"></div>
                    <span>Cyber-Physical Cascade</span>
                </div>
            </div>
            
            <div class="results-bar">
                <div class="results-bar-grid">
                    <div class="result-bar-item">
                        <div class="result-bar-label">Simulation Day</div>
                        <div class="result-bar-value" id="dayCounter">0</div>
                    </div>
                    <div class="result-bar-item">
                        <div class="result-bar-label">FTA Probability</div>
                        <div class="result-bar-value" id="ftaProbBar">0%</div>
                    </div>
                    <div class="result-bar-item">
                        <div class="result-bar-label">Cascades</div>
                        <div class="result-bar-value" id="cascadeCountBar">0</div>
                    </div>
                    <div class="result-bar-item">
                        <div class="result-bar-label">Traditional</div>
                        <div class="result-bar-value" id="standardCostBar">$0</div>
                    </div>
                    <div class="result-bar-item">
                        <div class="result-bar-label">Integrated</div>
                        <div class="result-bar-value" id="integratedCostBar">$0</div>
                    </div>
                    <div class="result-bar-item">
                        <div class="result-bar-label">Mitigated</div>
                        <div class="result-bar-value" id="mitigatedCostBar">$0</div>
                    </div>
                    <div class="result-bar-item">
                        <div class="result-bar-label">Hidden Risk</div>
                        <div class="result-bar-value" id="costDiffBar">0%</div>
                    </div>
                </div>
            </div>

            <div class="models-wrapper">
                <div class="model-section standard">
                    <div class="model-title">Traditional Supply Chain Model</div>
                    <canvas id="standardCanvas" width="600" height="650"></canvas>
                </div>
                <div class="model-section risk">
                    <div class="model-title">Integrated Cyber-Physical Model</div>
                    <canvas id="riskCanvas" width="600" height="650"></canvas>
                </div>
                <div class="model-section mitigated">
                    <div class="model-title">Mitigated Cyber-Physical Model</div>
                    <canvas id="mitigatedCanvas" width="600" height="650"></canvas>
                </div>
            </div>
            
            <div class="controls-section">
                <div style="background: #f8f9fa; padding: 14px; margin-bottom: 15px; border-radius: 4px; border: 1px solid #dee2e6;">
                    <div style="font-size: 13px; color: #495057; line-height: 1.6;">
                        <strong style="color: #212529;">Simulation Controls:</strong>
                        <div style="margin-top: 8px;">
                            • <strong>Run 30-Day Simulation:</strong> Automatically simulates 30 days with random events based on your probabilities<br>
                            • <strong>Trigger buttons:</strong> Manually fire specific disruption events to see their immediate effects<br>
                            • <strong>Step Forward:</strong> Advance simulation one day at a time (also press Spacebar)<br>
                            • <strong>Compare Models:</strong> Calculate and display the cost difference between traditional and integrated models<br>
                            • <strong>Reset All:</strong> Clear all disruptions and return both models to their initial state<br>
                            • <strong>Important:</strong> Traditional model shows only direct impacts, while integrated model reveals hidden cascade costs
                        </div>
                    </div>
                </div>
                <div class="controls">
                    <button class="btn-primary" onclick="runSimulation()" id="simBtn" title="Simulate 30 days of supply chain operations">Run 30-Day Simulation</button>
                    <button onclick="triggerRansomware()" id="ransBtn" title="Manually trigger a ransomware attack">Trigger Ransomware</button>
                    <button onclick="triggerEquipment()" id="equipBtn" title="Manually trigger equipment failure">Trigger Equipment Failure</button>
                    <button onclick="triggerSupplier()" id="suppBtn" title="Manually trigger supplier bankruptcy">Trigger Supplier Issue</button>
                    <button onclick="stepSimulation()" id="stepBtn" title="Advance simulation by one day (Spacebar)">Step Forward</button>
                    <button onclick="compareModels()" title="Calculate cost difference between models">Compare Models</button>
                    <button onclick="exportData()" title="Download simulation data as JSON">Export Data</button>
                    <button onclick="resetAll()" title="Reset both models to initial state">Reset All</button>
                </div>
            </div>
            
            <!--Detailed Results(Dropdown)-->
            <details style="margin-top: 20px;">
                <summary style="cursor: pointer; padding: 15px; background: #fafafa; border-radius: 8px; font-weight: 600; color: #2c3e50;">
                    View Detailed Results & Metrics
                </summary>
                <div class="results-panel" style="margin-top: 10px;">
                <div class="results-grid">
                    <div class="result-card" id="stateCard">
                        <div class="result-label">System State</div>
                        <div class="result-value" id="systemState">Normal</div>
                        <div class="result-description">
                            <ul>
                                <li>Current operational status</li>
                                <li>Normal or Cascading</li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">FTA Probability</div>
                        <div class="result-value" id="ftaProb">0%</div>
                        <div class="result-description">
                            <ul>
                                <li>Failure likelihood</li>
                                <li>From fault tree analysis</li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Cascade Count</div>
                        <div class="result-value" id="cascadeCount">0</div>
                        <div class="result-description">
                            <ul>
                                <li>Cyber→physical spreads</li>
                                <li>Secondary disruptions</li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Traditional Cost</div>
                        <div class="result-value" id="standardCost">$0</div>
                        <div class="result-description">
                            <ul>
                                <li>Physical risks only</li>
                                <li>No cascade effects</li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Integrated Cost</div>
                        <div class="result-value" id="integratedCost">$0</div>
                        <div class="result-description">
                            <ul>
                                <li>Cyber + physical risks</li>
                                <li>Includes cascades</li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Mitigated Cost</div>
                        <div class="result-value" id="mitigatedCost">$0</div>
                        <div class="result-description">
                            <ul>
                                <li>With active mitigations</li>
                                <li>Reduced impacts</li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Cost Difference</div>
                        <div class="result-value" id="costDiff">0%</div>
                        <div class="result-description">
                            <ul>
                                <li>Integrated vs traditional</li>
                                <li>Hidden risk exposure</li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Active Mitigations</div>
                        <div class="result-value" id="activeMitigations">0</div>
                        <div class="result-description">
                            <ul>
                                <li>Risk reduction strategies</li>
                                <li>Cost: $<span id="mitigationCost">0</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Mitigation Savings</div>
                        <div class="result-value" id="mitigationSavings">$0</div>
                        <div class="result-description">
                            <ul>
                                <li>Prevented losses</li>
                                <li>ROI: <span id="mitigationROI">0%</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            </details>
        </div>
        </div>
        <!-- End Simulation Tab -->
        
        <!-- Monte Carlo Tab -->
        <div id="montecarlo-tab" class="tab-content">
            <div id="mcContainer"></div>
        </div>
        <!-- End Monte Carlo Tab -->
        
        <!-- Enhanced FTA Tab -->
        <div id="fta-tab" class="tab-content">
            <div id="ftaContainer"></div>
        </div>
        <!-- End FTA Tab -->
        
        <!-- SCOR Mapping Tab -->
        <div id="scor-tab" class="tab-content">
            <div id="scorContainer"></div>
        </div>
        <!-- End SCOR Tab -->
        
    </div>
    
    <script src="js/shared-config.js"></script>
    <script src="js/all-code.js"></script>
    
    <!-- Home/Overview Module -->
    <script src="js/home-module.js"></script>
    
    <!-- Monte Carlo Module -->
    <script src="js/monte-carlo-module.js"></script>
    
    <!-- FTA Module -->
    <script src="js/fta-module.js"></script>
    
    <!-- SCOR Module -->
    <script src="js/scor-module.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof HomeModule !== 'undefined') {
                HomeModule.init('homeContainer');
            }
        });
    </script>
</body>
</html>